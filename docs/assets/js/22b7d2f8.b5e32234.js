"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[222],{3900:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"getting-started/adding-webhooks","title":"Adding webhooks","description":"Use the hosted API to create an API key, register a webhook, and fan out status payloads. The same flow applies when self-hosted.","source":"@site/docs/getting-started/adding-webhooks.md","sourceDirName":"getting-started","slug":"/getting-started/adding-webhooks","permalink":"/docs/getting-started/adding-webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/Noobyetpro/mc-pulse/tree/main/docs/docs/getting-started/adding-webhooks.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Making your first API call","permalink":"/docs/getting-started/making-your-first-api-call"},"next":{"title":"API reference","permalink":"/docs/api"}}');var o=s(4848),a=s(8453);const i={sidebar_position:3},r="Adding webhooks",d={},l=[{value:"1) Create an API key",id:"1-create-an-api-key",level:2},{value:"2) Register a webhook",id:"2-register-a-webhook",level:2},{value:"3) Notify all webhooks for that key",id:"3-notify-all-webhooks-for-that-key",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"adding-webhooks",children:"Adding webhooks"})}),"\n",(0,o.jsx)(t.p,{children:"Use the hosted API to create an API key, register a webhook, and fan out status payloads. The same flow applies when self-hosted."}),"\n",(0,o.jsx)(t.h2,{id:"1-create-an-api-key",children:"1) Create an API key"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'API_KEY=$(curl -s -X POST https://mc-pulse.vercel.app/api/api-keys \\\n  -H "Content-Type: application/json" \\\n  -d \'{"label":"starter key"}\' | jq -r .key)\n'})}),"\n",(0,o.jsx)(t.h2,{id:"2-register-a-webhook",children:"2) Register a webhook"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'curl -X POST https://mc-pulse.vercel.app/api/webhooks \\\n  -H "Content-Type: application/json" \\\n  -H "x-api-key: ${API_KEY}" \\\n  -d \'{"url":"https://example.com/hook","description":"discord alerts"}\'\n'})}),"\n",(0,o.jsx)(t.h2,{id:"3-notify-all-webhooks-for-that-key",children:"3) Notify all webhooks for that key"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'curl -X POST "https://mc-pulse.vercel.app/api/notify?host=arch.mc&type=java" \\\n  -H "x-api-key: ${API_KEY}"\n'})}),"\n",(0,o.jsx)(t.p,{children:"Notes:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Keep the returned API key; there is no list endpoint."}),"\n",(0,o.jsxs)(t.li,{children:["You can also send ",(0,o.jsx)(t.code,{children:"Authorization: ApiKey <KEY>"})," instead of ",(0,o.jsx)(t.code,{children:"x-api-key"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["The notify response includes per-webhook delivery results (",(0,o.jsx)(t.code,{children:"ok"}),", ",(0,o.jsx)(t.code,{children:"status"}),"/",(0,o.jsx)(t.code,{children:"error"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["More detail lives in the ",(0,o.jsx)(t.a,{href:"/docs/api",children:"API reference"})," and ",(0,o.jsx)(t.a,{href:"/docs/webhooks",children:"API keys and webhooks"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>r});var n=s(6540);const o={},a=n.createContext(o);function i(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);